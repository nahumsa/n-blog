<!doctype html><html prefix="og: http://ogp.me/ns#"><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Changing gates on a predefined circuit (Qiskit)</title><meta name=description content="Changing gates on a predefined circuit in Qiskit This notebook was inpired by a the paper by Czarnik et al. - Error mitigation with Clifford quantum-circuit data. Where you convert your arbitrary circuit into a clifford circuit that is simulable classically, a technique known as Clifford Data Regression (CDR).
So I was searching for to change a pre-existing circuit and I did not found any proper tutorial to do this on qiskit, even though it is simple, it is nontrivial and you need to change some inner objects inside the QuantumCircuit."><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=generator content="Hugo 0.83.1"><meta name=robots content="index,follow"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:title" content="Changing gates on a predefined circuit (Qiskit)"><meta property="og:description" content="Changing gates on a predefined circuit in Qiskit This notebook was inpired by a the paper by Czarnik et al. - Error mitigation with Clifford quantum-circuit data. Where you convert your arbitrary circuit into a clifford circuit that is simulable classically, a technique known as Clifford Data Regression (CDR).
So I was searching for to change a pre-existing circuit and I did not found any proper tutorial to do this on qiskit, even though it is simple, it is nontrivial and you need to change some inner objects inside the QuantumCircuit."><meta property="og:type" content="article"><meta property="og:url" content="https://nahumsa.github.io/n-blog/2020-09-08-changing-circuits/"><link rel=stylesheet href=https://nahumsa.github.io/n-blog/dist/site.css><link rel=stylesheet href=https://nahumsa.github.io/n-blog/dist/syntax.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic"><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous><link rel="shortcut icon" type=image/jpg href=https://nahumsa.github.io/n-blog/favicon.ico><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:['script','noscript','style','textarea','pre']}},window.addEventListener('load',a=>{document.querySelectorAll("mjx-container").forEach(function(a){a.parentElement.classList+='has-jax'})})</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></head><body><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-170504520-1','auto'),ga('send','pageview'))</script><div id=wrapper><header class=site-header><div class=container><div class=site-title-wrapper><h1 class=site-title><a href=https://nahumsa.github.io/n-blog/>n-blog</a></h1><a class="button-square button-social hint--top" data-hint=Twitter aria-label=Twitter href=https://twitter.com/sa_nahum rel=me><i class="fa fa-twitter" aria-hidden=true></i></a>
<a class="button-square button-social hint--top" data-hint=Github aria-label=Github href=https://github.com/nahumsa rel=me><i class="fa fa-github-alt" aria-hidden=true></i></a>
<a class="button-square button-social hint--top" data-hint=Email aria-label="Send an Email" href=mailto:nahumsa@cbpf.br><i class="fa fa-envelope" aria-hidden=true></i></a></div><ul class=site-nav></ul></div></header><div id=container><div class=container><article class=post-container itemscope itemtype=http://schema.org/BlogPosting><header class=post-header><h1 class=post-title itemprop="name headline">Changing gates on a predefined circuit (Qiskit)</h1><p class="post-date post-line"><span>Published <time datetime=2020-09-08 itemprop=datePublished>Tue, Sep 8, 2020</time></span>
<span>by</span>
<span itemscope itemprop=author itemtype=https://schema.org/Person><span itemprop=name><a href=# itemprop=url rel=author>Nahum SÃ¡</a></span></span></p></header><div class="post-content clearfix" itemprop=articleBody><h1 id=changing-gates-on-a-predefined-circuit-in-qiskit>Changing gates on a predefined circuit in Qiskit</h1><p>This notebook was inpired by a the paper by Czarnik et al. - <a href=https://arxiv.org/abs/2005.10189>Error mitigation with Clifford quantum-circuit data</a>. Where you convert your arbitrary circuit into a clifford circuit that is simulable classically, a technique known as Clifford Data Regression (CDR).</p><p>So I was searching for to change a pre-existing circuit and I did not found any proper tutorial to do this on qiskit, even though it is simple, it is nontrivial and you need to change some inner objects inside the <a href=https://qiskit.org/documentation/stubs/qiskit.circuit.QuantumCircuit.html>QuantumCircuit</a>.</p><h1 id=1-defining-the-circuit>1) Defining the circuit</h1><p>First we define a circuit that we want to change all non-clifford gates to clifford gates(X, Y, Z, and CNOT). This is done in the next cell:</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#069;font-weight:700>from</span> <span style=color:#0cf;font-weight:700>qiskit</span> <span style=color:#069;font-weight:700>import</span> QuantumCircuit, QuantumRegister
qr <span style=color:#555>=</span> QuantumRegister(<span style=color:#f60>2</span>, name<span style=color:#555>=</span><span style=color:#c30>&#39;q&#39;</span>)
qc <span style=color:#555>=</span> QuantumCircuit(qr)
qc<span style=color:#555>.</span>t(qr[<span style=color:#f60>0</span>])
qc<span style=color:#555>.</span>cx(qr[<span style=color:#f60>0</span>], qr[<span style=color:#f60>1</span>])
qc<span style=color:#555>.</span>x(qr[<span style=color:#f60>0</span>])
qc<span style=color:#555>.</span>draw(<span style=color:#c30>&#39;mpl&#39;</span>)
</code></pre></div><p><img src=/n-blog/figures/2020-09-08-Changing-Circuits_files/2020-09-08-Changing-Circuits_2_0.svg alt="Original Circuit"></p><p>Now we define a second circuit which will hold our modified circuit, if you do not need to keep the previous circuit, you can skip this part and overwrite the previous circuit.</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>qc_clifford <span style=color:#555>=</span> QuantumCircuit(<span style=color:#f60>2</span>)
qc_clifford<span style=color:#555>.</span>draw(<span style=color:#c30>&#39;mpl&#39;</span>)
</code></pre></div><p><img src=/n-blog/figures/2020-09-08-Changing-Circuits_files/2020-09-08-Changing-Circuits_4_0.svg alt="Blank Circuit"></p><h1 id=2-getting-instructions-from-the-circuit>2) Getting instructions from the circuit</h1><p>In order to change your circuit you should get the instructions from the circuit that you want to change. This is done by iterating over the QuantumCircuit object, this will give you the instruction, quantum registers and classical registers of that instruction. The instruction is a class from the circuit library and this class has some attributes such as the gate name which we will use in order to identify gates that are not in the clifford group, but you can use other attributes of this class such as <code>_params</code> for <code>u3</code>, <code>u2</code>, and <code>u1</code> gates.</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#069;font-weight:700>import</span> <span style=color:#0cf;font-weight:700>qiskit</span>
instructions <span style=color:#555>=</span> []
gates <span style=color:#555>=</span> []
new_gates <span style=color:#555>=</span> []
<span style=color:#069;font-weight:700>for</span> instruction, qargs, cargs <span style=color:#000;font-weight:700>in</span> qc:
    gates<span style=color:#555>.</span>append(instruction<span style=color:#555>.</span>name)    
    <span style=color:#069;font-weight:700>if</span> instruction<span style=color:#555>.</span>name <span style=color:#000;font-weight:700>not</span> <span style=color:#000;font-weight:700>in</span> [<span style=color:#c30>&#39;x&#39;</span>, <span style=color:#c30>&#39;y&#39;</span>, <span style=color:#c30>&#39;z&#39;</span>, <span style=color:#c30>&#39;cx&#39;</span>]:
        instruction <span style=color:#555>=</span> qiskit<span style=color:#555>.</span>circuit<span style=color:#555>.</span>library<span style=color:#555>.</span>XGate()    
    new_gates<span style=color:#555>.</span>append(instruction<span style=color:#555>.</span>name)
    instructions<span style=color:#555>.</span>append((instruction, qargs, cargs))

<span style=color:#069;font-weight:700>print</span>(f<span style=color:#c30>&#34;Gates in the original circuit: {gates}&#34;</span>)
<span style=color:#069;font-weight:700>print</span>(f<span style=color:#c30>&#34;Gates in the new circuit: {new_gates}&#34;</span>)
</code></pre></div><pre><code>Gates in the original circuit: ['t', 'cx', 'x']
Gates in the new circuit: ['x', 'cx', 'x']
</code></pre><p>Now we create the modified circuit by feeding the new instructions to the circuit using <a href=https://qiskit.org/documentation/stubs/qiskit.circuit.QuantumCircuit.data.html#qiskit.circuit.QuantumCircuit.data><code>QuantumCircuit.data</code></a>.</p><div class=highlight><pre style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>qc_clifford<span style=color:#555>.</span>data <span style=color:#555>=</span> instructions
qc_clifford<span style=color:#555>.</span>draw(<span style=color:#c30>&#39;mpl&#39;</span>)
</code></pre></div><p><img src=/n-blog/figures/2020-09-08-Changing-Circuits_files/2020-09-08-Changing-Circuits_8_0.svg alt="Clifford Circuit"></p><h1 id=references>References</h1><p>1 - <a href=https://qiskit.org/documentation/>Qiskit Documentation</a></p><hr><h3>Version Information</h3><table><tr><th>Qiskit Software</th><th>Version</th></tr><tr><td>Qiskit</td><td>0.19.1</td></tr><tr><td>Terra</td><td>0.14.1</td></tr><tr><td>Aer</td><td>0.5.1</td></tr><tr><td>Ignis</td><td>0.3.0</td></tr><tr><td>Aqua</td><td>0.7.0</td></tr><tr><td>IBM Q Provider</td><td>0.7.0</td></tr><tr><th>System information</th></tr><tr><td>Python</td><td>3.7.3 | packaged by conda-forge | (default, Jul 1 2019, 21:52:21)
[GCC 7.3.0]</td></tr><tr><td>OS</td><td>Linux</td></tr><tr><td>CPUs</td><td>2</td></tr><tr><td>Memory (Gb)</td><td>7.664028167724609</td></tr><tr><td colspan=2>Tue Sep 08 20:12:44 2020 -03</td></tr></table></div><footer class="post-footer clearfix"><div class=share><a class=icon-twitter href="https://twitter.com/share?text=Changing%20gates%20on%20a%20predefined%20circuit%20%28Qiskit%29&url=https%3a%2f%2fnahumsa.github.io%2fn-blog%2f2020-09-08-changing-circuits%2f" onclick="return window.open(this.href,'twitter-share','width=550,height=235'),!1" aria-label="Share on Twitter"><i class="fa fa-twitter" aria-hidden=true></i></a></div></footer></article></div></div></div><footer class=footer><div class=container><div class=site-title-wrapper><h1 class=site-title><a href=https://nahumsa.github.io/n-blog/>n-blog</a></h1><a class="button-square button-jump-top js-jump-top" href=# aria-label="Back to Top"><i class="fa fa-angle-up" aria-hidden=true></i></a></div><p class=footer-copyright><span>&copy; 2021 / Powered by <a href=https://gohugo.io/>Hugo</a></span></p><p class=footer-copyright><span><a href=https://github.com/roryg/ghostwriter>Ghostwriter theme</a> By <a href=http://jollygoodthemes.com>JollyGoodThemes</a></span>
<span>/ <a href=https://github.com/jbub/ghostwriter>Ported</a> to Hugo By <a href=https://github.com/jbub>jbub</a></span></p></div></footer><script src=https://nahumsa.github.io/n-blog/js/jquery-1.11.3.min.js></script><script src=https://nahumsa.github.io/n-blog/js/jquery.fitvids.js></script><script src=https://nahumsa.github.io/n-blog/js/scripts.js></script></body></html>